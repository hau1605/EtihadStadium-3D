<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <title>Smartcity - Building Map</title>

    <style>
      * {
        padding: 0;
        margin: 0;
      }

      html,
      body,
      #viewDiv {
        height: 100%;
        width: 100%;
      }
    </style>

    <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.28/esri/themes/light/main.css"
    />
    <script src="https://js.arcgis.com/4.28/"></script>
    <script>
      var list_points = [];
      var string_points = "";
      function copyTextToClipboard(text) {
        if (!navigator.clipboard) {
          fallbackCopyTextToClipboard(text);
          return;
        }
        navigator.clipboard.writeText(text).then(
          function () {
            console.log("Async: Copying to clipboard was successful!");
          },
          function (err) {
            console.error("Async: Could not copy text: ", err);
          }
        );
      }
      require([
        "esri/Map",
        "esri/Graphic",
        "esri/views/SceneView",
        "esri/geometry/Mesh",
        "esri/geometry/Point",
        "esri/layers/GeoJSONLayer",
        "esri/layers/SceneLayer",
        "esri/layers/GraphicsLayer",
        "esri/Graphic",
        "esri/request",
        "esri/symbols/ObjectSymbol3DLayer",
        "esri/geometry/Circle",
      ], function (
        Map,
        Graphic,
        SceneView,
        Mesh,
        Point,
        GeoJSONLayer,
        SceneLayer,
        GraphicsLayer,
        Graphic,
        esriRequest,
        ObjectSymbol3DLayer,
        Circle
      ) {
        var createGraphic = function (data) {
          return new Graphic({
            geometry: data,
            symbol: data.symbol,
            attributes: data,
            popupTemplate: data.popupTemplate,
          });
        };
        // spiral_stair
        const spiral_stair_floor = new GeoJSONLayer({
          url: "./data/spiral_stair/spiral_stair_floor.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.01,
                  material: {
                    color: "green"
                  }
                }
              ]
            }
          }
        });
        const spiral_stair_handles = new GeoJSONLayer({
          url: "./data/spiral_stair/spiral_stair_handles.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "fill",
                  size: 1,
                  material: {
                    color: "black"
                  }
                }
              ]
            }
          }
        });
        // Zone A
        const zone_a_column1 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_columns/zone_a_column1.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 32.0,
                                    material: {
                                        color: "#f5f5f5",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_column2 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_columns/zone_a_column2.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 34.0,
                                    material: {
                                        color: "#f5f5f5",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_column3 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_columns/zone_a_column3.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 37.5,
                                    material: {
                                        color: "#f5f5f5",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_column4 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_columns/zone_a_column4.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 39.0,
                                    material: {
                                        color: "#f5f5f5",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_column5 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_columns/zone_a_column5.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 40.0,
                                    material: {
                                        color: "#f5f5f5",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_column6 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_columns/zone_a_column6.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 40.5,
                                    material: {
                                        color: "#f5f5f5",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_column7 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_columns/zone_a_column7.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 41.0,
                                    material: {
                                        color: "#f5f5f5",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_column8 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_columns/zone_a_column8.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 41.5,
                                    material: {
                                        color: "#f5f5f5",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_column9 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_columns/zone_a_column9.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 42.0,
                                    material: {
                                        color: "#f5f5f5",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_columns_roof = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_columns_roof/zone_a_columns_roof.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 1.5,
                                    material: {
                                        color: "#ffffff",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_columns_sub_1 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_columns_sub1/zone_a_columns_sub_1.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 3.0,
                                    material: {
                                        color: "#f5f5f5",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_columns_sub_2 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_columns_sub2/zone_a_columns_sub_2.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 3.0,
                                    material: {
                                        color: "#f5f5f5",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_roof_main1 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_roofs/zone_a_roof_main1.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 0.05,
                                    material: {
                                        color: "#B0C4DE",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_roof_main2 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_roofs/zone_a_roof_main2.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 0.5,
                                    material: {
                                        color: "#F0f0f0",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_roof_sub = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_roofs/zone_a_roof_sub.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 0.05,
                                    material: {
                                        color: "#87CEFA",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_roof = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_roofs/zone_a_roof.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 1.5,
                                    material: {
                                        color: "#FFFFFF",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_wall_sub = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_walls/zone_a_wall_sub.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 2.0,
                                    material: {
                                        color: "#f5f5f5",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_wall1 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_walls/zone_a_wall1.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 32.0,
                                    material: {
                                        color: "#d3d3d3",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_wall2 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_walls/zone_a_wall2.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 33.75,
                                    material: {
                                        color: "#d3d3d3",
                                    },
                                },
                            ],
                        },
                    },
                });
                const zone_a_wall3 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_walls/zone_a_wall3.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 35.5,
                                    material: {
                                        color: "#d3d3d3",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_wall4 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_walls/zone_a_wall4.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 37,
                                    material: {
                                        color: "#d3d3d3",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_wall5 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_walls/zone_a_wall5.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 38.0,
                                    material: {
                                        color: "#d3d3d3",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_wall6 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_walls/zone_a_wall6.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 38.5,
                                    material: {
                                        color: "#d3d3d3",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_wall7 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_walls/zone_a_wall7.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 39,
                                    material: {
                                        color: "#d3d3d3",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_wall8 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_walls/zone_a_wall8.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 39.5,
                                    material: {
                                        color: "#d3d3d3",
                                    },
                                },
                            ],
                        },
                    },
                });

                const zone_a_wall9 = new GeoJSONLayer({
                    url: "./data/zone_a/zone_a_walls/zone_a_wall9.geojson",
                    renderer: {
                        type: "simple",
                        symbol: {
                            type: "polygon-3d",
                            symbolLayers: [
                                {
                                    type: "extrude",
                                    size: 40,
                                    material: {
                                        color: "#d3d3d3",
                                    },
                                },
                            ],
                        },
                    },
                });

        // Zone B
        let listCircle = [];
        listCoordinates = [
          [-2.1989105634447634, 53.483150672141186],
          [-2.1989122188803583, 53.48305464617142],
          [-2.1989207507255952, 53.48298868489513],
          [-2.198937298374548, 53.48291663449119],
          [-2.198962093850303, 53.48284399417016],
          [-2.198997676338993, 53.48276871716416],
          [-2.199026224679031, 53.48268622834205],
          [-2.199105707169946, 53.482600174869525],
        ];
        for (let i = 0; i < 8; i++) {
          listCircle[i] = new Circle({
            center: listCoordinates[i],
            geodesic: true,
            numberOfPoints: 100,
            radius: 0.4,
            radiusUnit: "meters",
          });
        }
        const geojsonLayer_B_roof = new GeoJSONLayer({
          url: "./data/zone_b/zone_b_roof.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 100.0,
                  material: {
                    color: "blue",
                  },
                },
              ],
            },
          },
        });
        const geojsonLayer_B_wall = new GeoJSONLayer({
          url: "./data/zone_b/zone_b_wall.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 100.0,
                  material: {
                    color: "blue",
                  },
                },
              ],
            },
          },
        });
        const geojsonLayer_B_wall_1 = new GeoJSONLayer({
          url: "./data/zone_b/wall/wall_1.geojson",
        });
        const geojsonLayer_B_wall_3_1 = new GeoJSONLayer({
          url: "./data/zone_b/wall/wall_3_1.geojson",
        });
        const geojsonLayer_B_wall_3_2 = new GeoJSONLayer({
          url: "./data/zone_b/wall/wall_3_2.geojson",
        });
        const geojsonLayer_B_wall_3_3 = new GeoJSONLayer({
          url: "./data/zone_b/wall/wall_3_3.geojson",
        });
        const geojsonLayer_B_line_wall_8_7 = new GeoJSONLayer({
          url: "./data/zone_b/wall/line_wall_8_7.geojson",
        });
        const geojsonLayer_B_line_wall_7_6 = new GeoJSONLayer({
          url: "./data/zone_b/wall/line_wall_7_6.geojson",
        });
        const geojsonLayer_B_line_wall_6_5 = new GeoJSONLayer({
          url: "./data/zone_b/wall/line_wall_6_5.geojson",
        });
        const geojsonLayer_B_line_wall_5_4 = new GeoJSONLayer({
          url: "./data/zone_b/wall/line_wall_5_4.geojson",
        });
        const geojsonLayer_B_line_wall_4_3 = new GeoJSONLayer({
          url: "./data/zone_b/wall/line_wall_4_3.geojson",
        });
        const geojsonLayer_B_vline_wall_3_1 = new GeoJSONLayer({
          url: "./data/zone_b/wall/vertical_line_wall_3_1.geojson",
        });
        const geojsonLayer_B_round_pillar_1_1 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_1_1.geojson",
        });
        const geojsonLayer_B_round_pillar_1_2 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_1_2.geojson",
        });
        const geojsonLayer_B_round_pillar_1_3 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_1_3.geojson",
        });
        const geojsonLayer_B_round_pillar_2_1 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_2_1.geojson",
        });
        const geojsonLayer_B_round_pillar_2_2 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_2_2.geojson",
        });
        const geojsonLayer_B_round_pillar_2_3 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_2_3.geojson",
        });
        const geojsonLayer_B_round_pillar_3_1 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_3_1.geojson",
        });
        const geojsonLayer_B_round_pillar_3_2 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_3_2.geojson",
        });
        const geojsonLayer_B_round_pillar_3_3 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_3_3.geojson",
        });
        const geojsonLayer_B_round_pillar_4_1 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_4_1.geojson",
        });
        const geojsonLayer_B_round_pillar_4_2 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_4_2.geojson",
        });
        const geojsonLayer_B_round_pillar_4_3 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_4_3.geojson",
        });
        const geojsonLayer_B_round_pillar_5_1 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_5_1.geojson",
        });
        const geojsonLayer_B_round_pillar_5_2 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_5_2.geojson",
        });
        const geojsonLayer_B_round_pillar_5_3 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_5_3.geojson",
        });
        const geojsonLayer_B_round_pillar_6_1 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_6_1.geojson",
        });
        const geojsonLayer_B_round_pillar_6_2 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_6_2.geojson",
        });
        const geojsonLayer_B_round_pillar_6_3 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_6_3.geojson",
        });
        const geojsonLayer_B_round_pillar_7_1 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_7_1.geojson",
        });
        const geojsonLayer_B_round_pillar_7_2 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_7_2.geojson",
        });
        const geojsonLayer_B_round_pillar_7_3 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_7_3.geojson",
        });
        const geojsonLayer_B_round_pillar_8_1 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_8_1.geojson",
        });
        const geojsonLayer_B_round_pillar_8_2 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_8_2.geojson",
        });
        const geojsonLayer_B_round_pillar_8_3 = new GeoJSONLayer({
          url: "./data/zone_b/round_pillar/round_pillar_8_3.geojson",
        });

        geojsonLayer_B_wall_1.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 100.0,
                material: {
                  color: "#647a88",
                },
              },
            ],
          },
        };
        geojsonLayer_B_wall_3_1.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 100.0,
                material: {
                  color: "#647a88",
                },
              },
            ],
          },
        };
        geojsonLayer_B_wall_3_2.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 100.0,
                material: {
                  color: "#647a88",
                },
              },
            ],
          },
        };
        geojsonLayer_B_wall_3_3.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 100.0,
                material: {
                  color: "#647a88",
                },
              },
            ],
          },
        };
        geojsonLayer_B_line_wall_8_7.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.0,
                material: {
                  color: "#9e9e9f",
                },
              },
            ],
          },
        };
        geojsonLayer_B_line_wall_7_6.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.0,
                material: {
                  color: "#9e9e9f",
                },
              },
            ],
          },
        };
        geojsonLayer_B_line_wall_6_5.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.0,
                material: {
                  color: "#9e9e9f",
                },
              },
            ],
          },
        };
        geojsonLayer_B_line_wall_5_4.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.0,
                material: {
                  color: "#9e9e9f",
                },
              },
            ],
          },
        };
        geojsonLayer_B_line_wall_4_3.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.0,
                material: {
                  color: "#9e9e9f",
                },
              },
            ],
          },
        };
        geojsonLayer_B_vline_wall_3_1.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 100.0,
                material: {
                  color: "black",
                },
              },
            ],
          },
        };

        geojsonLayer_B_round_pillar_1_1.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 98.3,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_1_2.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 3.0,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_1_3.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.45,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_2_1.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 97.8,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_2_2.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 3.0,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_2_3.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.45,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_3_1.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 97.3,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_3_2.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 3.0,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_3_3.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.45,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_4_1.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 96.8,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_4_2.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 3.0,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_4_3.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.45,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_5_1.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 96.3,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_5_2.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 3.0,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_5_3.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.45,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_6_1.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 95.8,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_6_2.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 3.0,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_6_3.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.45,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_7_1.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 95.3,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_7_2.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 3.0,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_7_3.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.45,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_8_1.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 90.5,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_8_2.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 3.0,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };
        geojsonLayer_B_round_pillar_8_3.renderer = {
          type: "simple",
          symbol: {
            type: "polygon-3d",
            symbolLayers: [
              {
                type: "extrude",
                size: 2.45,
                material: {
                  color: "#4b4a46",
                },
              },
            ],
          },
        };

        // Zone C
        const geojsonLayer_C_top = new GeoJSONLayer({
          url: "./data/zone_c/zone_c_top.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 1.5,
                  material: {
                    color: "white",
                  },
                },
              ],
            },
          },
        });
        const geojsonLayer_C_wall = new GeoJSONLayer({
          url: "./data/zone_c/zone_c_wall.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 100.5,
                  material: {
                    color: "#f0f0f0",
                  },
                },
              ],
            },
          },
        });
        const geojsonLayer_C_gate = new GeoJSONLayer({
          url: "./data/zone_c/zone_c_gate.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 80.0,
                  material: {
                    color: "blue",
                  },
                },
              ],
            },
          },
        });
        const geojsonLayer_C_curve = new GeoJSONLayer({
          url: "./data/zone_c/zone_c_curve.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 2,
                  material: {
                    color: "#c4c4c4",
                  },
                },
              ],
            },
          },
        });
        const geojsonLayer_C_roof_a = new GeoJSONLayer({
          url: "./data/zone_c/zone_c_roof_a.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.1,
                  material: {
                    color: "#b2bdc3",
                  },
                },
              ],
            },
          },
        });
        const geojsonLayer_C_roof_b = new GeoJSONLayer({
          url: "./data/zone_c/zone_c_roof_b.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 0.1,
                  material: {
                    color: "#6b75ba",
                  },
                },
              ],
            },
          },
        });

        // Zone D
        const geojsonLayer_D_roof = new GeoJSONLayer({
          url: "./data/zone_d/zone_d_roof.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 100.0,
                  material: {
                    color: "blue",
                  },
                },
              ],
            },
          },
        });
        const geojsonLayer_D_wall = new GeoJSONLayer({
          url: "./data/zone_d/zone_d_wall.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 100.0,
                  material: {
                    color: "blue",
                  },
                },
              ],
            },
          },
        });

        // Zone E
        const geojsonLayer_E_roof = new GeoJSONLayer({
          url: "./data/zone_e/zone_e_roof.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 100.0,
                  material: {
                    color: "blue",
                  },
                },
              ],
            },
          },
        });
        const geojsonLayer_E_wall = new GeoJSONLayer({
          url: "./data/zone_e/zone_e_wall.geojson",
          renderer: {
            type: "simple",
            symbol: {
              type: "polygon-3d",
              symbolLayers: [
                {
                  type: "extrude",
                  size: 100.0,
                  material: {
                    color: "blue",
                  },
                },
              ],
            },
          },
        });



        // Spiral Stairs

			// Round1 Columns for Spiral Stairs
			const roundColumnLayerSpiral_1 = new GraphicsLayer();
			const roundColumn_point_spiral_1 = [
				[-2.1989134288304477, 53.48321030822259, 50],
				[-2.1989284532280275, 53.48326868602463, 50.5],
				[-2.1989515677235603, 53.4833452467782, 50.5],
				[-2.1989699488672643, 53.48340923316967, 50],
				[-2.1990063060707006, 53.483472426687605, 49.5]
			];
			const roundColumn_symbol_spiral_1 = {
				type: "point-3d",
				symbolLayers: [
					{
						type: "object",
						width: 0.6,
						height: 50,
						resource: {
							primitive: "cylinder",
						},
						material: {
							color: "red",
						},
					},
				],
			};
			for (const point of roundColumn_point_spiral_1) {
				const [x, y, z] = point;
				const pointLocation = new Point({
					x: x,
					y: y,
					z: z,
				});
				const roundColumn_pointGraphic = new Graphic({
					geometry: pointLocation,
					symbol: roundColumn_symbol_spiral_1,
				});
				roundColumnLayerSpiral_1.add(roundColumn_pointGraphic);
			}
			// Round1 Columns for Spiral Stairs
			const roundColumnLayerSpiral_2 = new GraphicsLayer();
			const roundColumn_point_spiral_2 = [
				[-2.1989134288304477, 53.48321030822259, 100],
				[-2.1989284532280275, 53.48326868602463, 100.5],
				[-2.1989515677235603, 53.4833452467782, 100.5],
				[-2.1989699488672643, 53.48340923316967, 100],
				[-2.1990063060707006, 53.483472426687605, 99.5]
			];
			const roundColumn_symbol_spiral_2 = {
				type: "point-3d",
				symbolLayers: [
					{
						type: "object",
						width: 0.8,
						height: 3,
						resource: {
							primitive: "cylinder",
						},
						material: {
							color: "red",
						},
					},
				],
			};
			for (const point of roundColumn_point_spiral_2) {
				const [x, y, z] = point;
				const pointLocation = new Point({
					x: x,
					y: y,
					z: z,
				});
				const roundColumn_pointGraphic = new Graphic({
					geometry: pointLocation,
					symbol: roundColumn_symbol_spiral_2,
				});
				roundColumnLayerSpiral_2.add(roundColumn_pointGraphic);
			}
			// colum 3
			const roundColumnLayerSpiral_3 = new GraphicsLayer();
			const roundColumn_point_spiral_3 = [
				[-2.1989134288304477, 53.48321030822259, 103],
				[-2.1989284532280275, 53.48326868602463, 103.5],
				[-2.1989515677235603, 53.4833452467782, 103.5],
				[-2.1989699488672643, 53.48340923316967, 103],
				[-2.1990063060707006, 53.483472426687605, 102.5]
			];
			const roundColumn_symbol_spiral_3 = {
				type: "point-3d",
				symbolLayers: [
					{
						type: "object",
						width: 0.3,
						height: 3,
						resource: {
							primitive: "cylinder",
						},
						material: {
							color: "red",
						},
					},
				],
			};
			for (const point of roundColumn_point_spiral_3) {
				const [x, y, z] = point;
				const pointLocation = new Point({
					x: x,
					y: y,
					z: z,
				});
				const roundColumn_pointGraphic = new Graphic({
					geometry: pointLocation,
					symbol: roundColumn_symbol_spiral_3,
				});
				roundColumnLayerSpiral_3.add(roundColumn_pointGraphic);
			}
			/* ----------End Round Columns for Spiral Stairs---------- */

        // Polygon banister Layer
        const polygon_banister_Layer = new GraphicsLayer();
        var polygon_banister = [
          {
            type: "polygon",
            rings: [
              [-2.1990145030118327, 53.48348685248627, 99.09999999999806],
              [-2.199026505948793, 53.48349359005887, 98.99999999999807],
              [-2.199036669927162, 53.48350913594487, 98.89999999999807],
              [-2.1990435781657482, 53.48351918950201, 98.79999999999808],
              [-2.1990462447161763, 53.48353190463802, 98.69999999999808],

              [-2.1990462447161763, 53.48353190463802, 100.69999999999808],
              [-2.1990435781657482, 53.48351918950201, 100.79999999999808],
              [-2.199036669927162, 53.48350913594487, 100.89999999999807],
              [-2.199026505948793, 53.48349359005887, 100.99999999999807],
              [-2.1990145030118327, 53.48348685248627, 99.09999999999806],
            ],
            symbol: {
              type: "extrude",
              color: "black",
              outline: {
                color: "black",
                width: 2
              }
            }
          }
        ]
        polygon_banister.forEach(function (data) {
          polygon_banister_Layer.add(createGraphic(data));
        });
        /* ---------- End Polygon banister Layer ---------- */
        const map = new Map({
          basemap: "topo-vector",
          ground: "world-elevation",
          layers: [
            // spiral_stair_floor,
            // spiral_stair_handles,
            //zone_a
            zone_a_column1,
            zone_a_column2,
            zone_a_column3,
            zone_a_column4,
            zone_a_column5,
            zone_a_column6,
            zone_a_column7,
            zone_a_column8,
            zone_a_column9,
            zone_a_columns_roof,
            zone_a_columns_sub_1,
            zone_a_columns_sub_2,
            zone_a_roof_main1,
            zone_a_roof_main2,
            zone_a_roof_sub,
            zone_a_roof,
            zone_a_wall_sub,
            zone_a_wall1,
            zone_a_wall2,
            zone_a_wall3,
            zone_a_wall4,
            zone_a_wall5,
            zone_a_wall6,
            zone_a_wall7,
            zone_a_wall8,
            zone_a_wall9,
            //zone_b
            geojsonLayer_B_roof,
            geojsonLayer_B_wall,
            // geojsonLayer_B_wall_1,
            // geojsonLayer_B_wall_3_1,
            // geojsonLayer_B_wall_3_2,
            // geojsonLayer_B_wall_3_3,
            // geojsonLayer_B_vline_wall_3_1,
            geojsonLayer_B_round_pillar_1_1,
            geojsonLayer_B_round_pillar_1_2,
            geojsonLayer_B_round_pillar_1_3,
            geojsonLayer_B_round_pillar_2_1,
            geojsonLayer_B_round_pillar_2_2,
            geojsonLayer_B_round_pillar_2_3,
            geojsonLayer_B_round_pillar_3_1,
            geojsonLayer_B_round_pillar_3_2,
            geojsonLayer_B_round_pillar_3_3,
            geojsonLayer_B_round_pillar_4_1,
            geojsonLayer_B_round_pillar_4_2,
            geojsonLayer_B_round_pillar_4_3,
            geojsonLayer_B_round_pillar_5_1,
            geojsonLayer_B_round_pillar_5_2,
            geojsonLayer_B_round_pillar_5_3,
            geojsonLayer_B_round_pillar_6_1,
            geojsonLayer_B_round_pillar_6_2,
            geojsonLayer_B_round_pillar_6_3,
            geojsonLayer_B_round_pillar_7_1,
            geojsonLayer_B_round_pillar_7_2,
            geojsonLayer_B_round_pillar_7_3,
            geojsonLayer_B_round_pillar_8_1,
            geojsonLayer_B_round_pillar_8_2,
            geojsonLayer_B_round_pillar_8_3,
            geojsonLayer_B_line_wall_8_7,
            geojsonLayer_B_line_wall_7_6,
            geojsonLayer_B_line_wall_6_5,
            geojsonLayer_B_line_wall_5_4,
            geojsonLayer_B_line_wall_4_3,
            geojsonLayer_C_top,
            geojsonLayer_C_wall,
            geojsonLayer_C_curve,
            geojsonLayer_C_roof_a,
            geojsonLayer_C_roof_b,
            geojsonLayer_C_gate,
            geojsonLayer_D_roof,
            geojsonLayer_D_wall,
            geojsonLayer_E_roof,
            geojsonLayer_E_wall,
          ],
        });
			map.addMany([roundColumnLayerSpiral_1, roundColumnLayerSpiral_2, roundColumnLayerSpiral_3, polygon_banister_Layer]);

        const view = new SceneView({
          container: "viewDiv",
          map: map,
          camera: {
            position: [-2.1957615021032595, 53.4836002000014, 300],
            heading: 260,
            tilt: 50,
          },
        });

        for (let i = 0; i < 8; i++) {
          view.graphics.add(
            new Graphic({
              geometry: listCircle[i],
              symbol: {
                type: "simple-fill",
                style: "none",
                outline: {
                  width: 3,
                  color: "red",
                },
              },
            })
          );
        }

        view.popup.defaultPopupTemplateEnabled = true;
        // view.popup.autoOpenEnabled = false;
        view.on("click", function (event) {
          // Listen for the click event
          view.hitTest(event).then(function (hitTestResults) {
            if (hitTestResults.results) {
              list_points.push([
                event.mapPoint.longitude,
                event.mapPoint.latitude,
              ]);
              string_points +=
                "[" +
                event.mapPoint.longitude +
                ", " +
                event.mapPoint.latitude +
                "],";
              copyTextToClipboard(string_points);
            }
          });
        });
        /* ============================================================ */

        /* Spiral Stair */
        const locations = [
          { x: -2.199214597876507, y: 53.4838823487394, z: 42 },
          // { x: -2.198889337447818, y: 53.483537990433575, z: 42},
          // { x: -2.198753326311802, y: 53.4831040771985, z: 42},
          // { x: -2.1988669791679825, y: 53.482715645543365, z: 42},
          // { x: -2.2018982099127284, y: 53.48360418053181, z: 42},
          // { x: -2.20200827278425, y: 53.483208960860466, z: 42},
          // { x: -2.2018859292270636, y: 53.48277537857368, z: 42},
          // { x: -2.2015557232799385, y: 53.48242702862161, z: 42},
        ];
        locations.forEach(location => {
          const locationPoint = new Point(location);

          Mesh.createFromGLTF(locationPoint, "./model/Part1.gltf")
            .then(function (geometry) {
              geometry.scale(1000, {
                origin: {
                  locationPoint
                }
              });
              geometry.rotate(0, 0, 90);
              const graphic = new Graphic({
                geometry,
                symbol: {
                  type: "mesh-3d",
                  symbolLayers: [
                    {
                      type: "fill",
                      material: {
                        // color: "rgba(0, 0, 255, 0.5)"
                      },
                      size: 1000
                    }
                  ]
                }
              });
              view.graphics.add(graphic);
            })
            .catch(console.error);
        });
      });
      /* ============================================================ */
    </script>
	</script>
	<script>
		const tinhtien = (pointBegin, pointEnd, Arr, z) => {
			let x = pointEnd[1] - pointBegin[1];
			let y = pointEnd[0] - pointBegin[0];
			let completeArr = Arr.map((point) => {
				return (
					[point[0] + y, point[1] + x, point[2] - z]
				)
			})
			return completeArr;
		}
		console.log(tinhtien(
			[-2.1989515677235603, 53.4833452467782, 106.5],
			[-2.198947254690702, 53.48334542020242, 106.5],
			[
      [-2.1989284532280275, 53.48326868602463, 106.5],
            [-2.198933174479815, 53.48328948206941, 106.7],
            [-2.198945210410978, 53.48332938167357, 106.7],
			],
			0
		));
	</script>
</head>

  <body>
    <div id="viewDiv"></div>
  </body>
</html>
